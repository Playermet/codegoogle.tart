import tart.testing.Test;

@EntryPoint
def main(args:String[]) -> int {
  return Test.run(ArithmeticOperatorTest);
}

class ArithmeticOperatorTest : Test {
	def testBasicOperators() {
	  assertEq(2, 1+1);
	  assertEq(1, 2-1);
	  assertEq(9, 3*3);
	  assertEq(1, 3/3);
	  
	  var a:int = 0;
	  a += 3;
	  assertEq(3, a);
	}
	
	def testRelationalOperators() {
	  // Equal
	  assertTrue(1 == 1);
	  assertFalse(1 == 0);
	
	  // Not equal
	  assertTrue(1 != 0);
	  assertFalse(1 != 1);
	
	  // Less
	  assertTrue(0 < 1);
	  assertFalse(1 < 0);
	  assertFalse(0 < 0);
	
	  // Less or equal
	  assertTrue(0 <= 1);
	  assertTrue(1 <= 1);
	  assertFalse(1 <= 0);
	
	  // Greater
	  assertTrue(1 > 0);
	  assertFalse(0 > 1);
	  assertFalse(0 > 0);
	  assertTrue(1 > -128);
	
	  // Greater or equal
	  assertTrue(1 >= 0);
	  assertTrue(1 >= 1);
	  assertFalse(0 >= 1);
	
	  // Unit test for a bug fix - signed integer constants not being sign extended.
	  assertTrue(int32(int8(-1)) < int32(1));
	  assertTrue(int32(int8(-128)) < int32(1));
	}
	
	def testRelationalOperatorsNonConst() {
	  var zero = 0;
	  var one = 1;
	
	  // Equal
	  assertTrue(one == one);
	  assertFalse(one == zero);
	
	  // Not equal
	  assertTrue(one != zero);
	  assertFalse(one != one);
	
	  // Less
	  assertTrue(zero < one);
	  assertFalse(one < zero);
	  assertFalse(zero < zero);
	
	  // Less or equal
	  assertTrue(zero <= one);
	  assertTrue(one <= one);
	  assertFalse(one <= zero);
	
	  // Greater
	  assertTrue(one > zero);
	  assertFalse(zero > one);
	  assertFalse(zero > zero);
	
	  // Greater or equal
	  assertTrue(one >= zero);
	  assertTrue(one >= one);
	  assertFalse(zero >= one);
	}
	
	def testRelationalAndLogicalOperators() {
	  var zero = 0;
	  var one = 1;
	  var two = 1;
	  
	  // Both true
	  assertTrue(one == one and zero == zero);
	  assertTrue(zero < one and one > zero);
	  assertTrue(one == one or zero == zero);
	  assertTrue(zero < one or one > zero);
	
	  // And with one false
	  assertFalse(zero < one and zero > one);
	  assertFalse(one < zero and one > zero);
	  
	  // Or with one false
	  assertTrue(zero < one or zero > one);
	  assertTrue(one < zero or one > zero);
	
	  assertTrue(one >= zero and one <= two);
	  assertTrue(one >= 0 and one <= 2);
	}
}
