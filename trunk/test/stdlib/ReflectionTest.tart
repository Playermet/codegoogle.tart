import tart.reflect.Module;
import tart.reflect.Method;

@EntryPoint
def main(args:String[]) -> int {
  testModuleReflection();
  testModuleMethods();
  testFindMethod();
  return 0;
}

def testModuleReflection() {
  let m = Module.thisModule();
  Debug.assertEq("ReflectionTest", m.name);
  Debug.assertEq(0, m.types.length);
  Debug.assertEq(5, m.methods.length);
}

def testModuleMethods() {
  let m = Module.thisModule();
  for method in m.methods {
    Debug.writeLn(method.name);
    //if m.name == "sample"
  } 
  //Debug.assertEq("ReflectionTest", m.name);
}

def testFindMethod() {
  let m = Module.thisModule();
  let f1 = m.findMethod("sample");
  Debug.assertTrue(f1 isa Method);
  let f2 = m.findMethod("ample");
  Debug.assertFalse(f2 isa Method);
}

def sample() {}
