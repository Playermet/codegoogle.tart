import tart.reflect.Module;

namespace TestUtils {

  /** Simple function to run all of the test functions in a module. */  
  def runModuleTests(m:Module) -> int {
    try {
		  for method in m.methods {
		    if method.name.startsWith("test") {
		      Debug.writeLn("[Running] ", m.name, ".", method.name);
		      method.call(m);
		    }
		  } 
    } catch t:Throwable {
      Debug.fail("Unexpected exception: ", t.toString());
      return 1;
    }
    
    Debug.writeLn("[OK     ]");
    return 0;
  }
}
